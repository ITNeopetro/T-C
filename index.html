<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neopetro T&C Acknowledgement</title>

<style>
body{
  font-family:Arial,Helvetica,sans-serif;
  background:#f4f6f8;
  margin:0;
  padding:20px;
}
.container{
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:30px;
  border-radius:8px;
  box-shadow:0 4px 12px rgba(0,0,0,.08);
}
.header{text-align:center;margin-bottom:30px}
.header img{max-width:150px;margin-bottom:10px}
.header h1{font-size:22px;margin:5px 0}
.header p{font-size:14px;font-weight:bold;margin:0}

label{
  font-weight:bold;
  font-size:13px;
  margin-top:14px;
  display:block;
}
input[type="text"],
input[type="date"],
select,
textarea{
  width:100%;
  padding:9px;
  font-size:14px;
  border:1px solid #ccc;
  border-radius:4px;
  box-sizing:border-box;
  margin-top:6px;
}
textarea{
  height:260px;
  resize:none;
  background:#fafafa;
}

/* Signature layout – SAME as original */
.signature-container{
  display:flex;
  gap:20px;
  margin-top:25px;
  flex-wrap:wrap;
}
.signature-box{
  flex:1;
  min-width:280px;
}
.signature-box canvas{
  border:1px solid #333;
  width:100%;
  height:160px;
  touch-action:none;
}
.side-panel{
  flex:1;
  min-width:260px;
  display:flex;
  align-items:flex-start;
}
.side-panel label{
  font-weight:normal;
  font-size:14px;
}

.btn-yellow{
  background:#f8c400;
  color:#000;
  border:none;
  border-radius:5px;
  cursor:pointer;
}
.btn-yellow:hover{background:rgba(248,196,0,.85)}

#clear-signature{
  margin-top:8px;
  padding:8px;
  width:100%;
}

button[type="submit"]{
  margin-top:30px;
  padding:14px;
  width:100%;
  font-size:15px;
}

.error{
  color:red;
  font-size:13px;
  margin-top:3px;
}

/* Popup */
#popup{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.5);
  z-index:1000;
}
#popupContent{
  background:#fff;
  padding:25px;
  max-width:420px;
  margin:120px auto;
  border-radius:8px;
  text-align:center;
}
.popup-btn{
  width:100%;
  padding:10px;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="container">

<div class="header">
  <img src="NEOPETRO LOGO.png" alt="Neopetro Logo">
  <h1>NEOPETRO SDN BHD</h1>
  <p>TERMS & CONDITIONS ACKNOWLEDGEMENT</p>
</div>

<form id="tcForm">

<label>Full Name *</label>
<input type="text" id="name">
<div id="nameError" class="error"></div>

<label>IC No / Passport No *</label>
<input type="text" id="idno" placeholder="e.g. 900101-14-1234 / A12345678">
<div id="idnoError" class="error"></div>

<label>Position / Rank *</label>
<select id="position">
  <option value="">-- Select Rank --</option>
  <option>Onshore Staff</option>
  <option>Master</option>
  <option>Chief Officer</option>
  <option>Chief Engineer</option>
  <option>Second Officer</option>
  <option>Second Engineer</option>
  <option>Bosun</option>
  <option>Able Bodied</option>
  <option>Greaser</option>
  <option>Oiler</option>
  <option>Cook</option>
</select>
<div id="positionError" class="error"></div>

<label>Vessel / Office *</label>
<select id="vessel">
  <option value="">-- Select Vessel --</option>
  <option>Office</option>
  <option>Neopetro 8</option>
  <option>Neopetro 10</option>
  <option>Neopetro 11</option>
  <option>Neopetro 12</option>
  <option>Neopetro 18</option>
  <option>NP Explorer</option>
</select>
<div id="vesselError" class="error"></div>

<label>Date *</label>
<input type="date" id="date">
<div id="dateError" class="error"></div>

<label>Terms & Conditions</label>
<textarea readonly>
I acknowledge that I have read, understood, and agree to comply with all NEOPETRO SDN BHD policies, procedures, and requirements applicable to my employment or engagement.

I understand that it is my responsibility to:
• Stay informed and updated on all applicable company policies and procedures.
• Perform my duties in accordance with company standards, statutory requirements, and best practices.
• Seek clarification from my supervisor or the relevant department if I am unsure about any policy or requirement.
• Immediately report any unsafe acts, unsafe conditions, incidents, near misses, or policy violations.

The policies acknowledged include, but are not limited to:

1. HSSE & Social Responsibilities Policy
2. Marine Operations & Safe Navigation Policy
3. Stop Work Authority Policy
4. Marine Security & Cyber Protection Policy
5. Occupational Health & Human Rights Policy
6. Substance Misuse Policy
7. No Smoking & Ignition Source Control Policy
8. Anti-Harassment & Workplace Conduct Policy
9. Governance, Compliance & Operational Excellence Policy

I acknowledge that failure to comply with company policies, procedures, or instructions may result in disciplinary action, which may include termination of employment or legal action where applicable.

This acknowledgement is deemed legally binding and equivalent to a handwritten signature.
</textarea>

<div class="signature-container">

  <div class="signature-box">
    <label>Signature *</label>
    <canvas id="signature-pad"></canvas>
    <button type="button" id="clear-signature" class="btn-yellow">Clear Signature</button>
  </div>

  <div class="side-panel">
    <label>
      <input type="checkbox" id="acknowledgeCheckbox">
      I confirm that I have read, understood, and agree to the above terms. *
    </label>
    <div id="checkboxError" class="error"></div>
  </div>

</div>

<button type="submit" class="btn-yellow">Submit Acknowledgement</button>

</form>
</div>

<div id="popup">
  <div id="popupContent">
    <h3>Submission Recorded</h3>
    <p>Your acknowledgement has been successfully submitted.</p>
    <button id="closePopupBtn" class="popup-btn btn-yellow">Close</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
emailjs.init("e11xX_5IIA36HGfyg");

const canvas = document.getElementById('signature-pad');
const signaturePad = new SignaturePad(canvas);

document.getElementById('clear-signature').onclick = () => signaturePad.clear();

document.getElementById('tcForm').addEventListener('submit', function(e){
  e.preventDefault();

  document.querySelectorAll(".error").forEach(el=>el.innerText="");

  const nameVal = document.getElementById('name').value.trim();
  const idnoVal = document.getElementById('idno').value.trim();
  const positionVal = document.getElementById('position').value;
  const vesselVal = document.getElementById('vessel').value;
  const dateVal = document.getElementById('date').value;
  const checkbox = document.getElementById('acknowledgeCheckbox').checked;

  let valid = true;

  if(!nameVal){nameError.innerText="Full Name is mandatory"; valid=false;}
  if(!idnoVal){idnoError.innerText="IC / Passport No is mandatory"; valid=false;}
  if(!positionVal){positionError.innerText="Position is mandatory"; valid=false;}
  if(!vesselVal){vesselError.innerText="Vessel is mandatory"; valid=false;}
  if(!dateVal){dateError.innerText="Date is mandatory"; valid=false;}
  if(!checkbox){checkboxError.innerText="Please confirm acknowledgement"; valid=false;}
  if(signaturePad.isEmpty()){canvas.style.borderColor='red'; valid=false;}

  if(!valid) return;

  emailjs.send("service_zdyjwv1","template_1a0dwtt",{
    name: nameVal,
    id_no: idnoVal,
    position: positionVal,
    vessel: vesselVal,
    date: dateVal,
    signature: signaturePad.toDataURL("image/png")
  }).then(()=>{
    document.getElementById('popup').style.display="block";
  });
});

document.getElementById('closePopupBtn').onclick = ()=> location.reload();
</script>

</body>
</html>
